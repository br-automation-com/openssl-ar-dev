# B&R Automation Runtime
# 
# Only used to generate the Makefile which afterward parses it for o-files used in libssl.a and libcrypto.a
# This list of o-files is used to generate a ANSIC.lby file for compilation in Automation Studio
#
# Based on linux-elf but without inherit_from asm("x86_elf_asm") as it added some o-files to the makefile generated by some pl scripts
# some or one of the "no-" options must have disabled it
my %targets = (
    "br-ar" => {
        #inherit_from     => [ "linux-elf"],
        inherit_from     => [ "linux-generic32"], # removed asm("x86_elf_asm") 
        CFLAGS           => add(picker(release => "-fomit-frame-pointer")),
        lib_cppflags     => add("-DL_ENDIAN"),
        bn_ops           => "BN_LLONG",
        disable          => add(
                                "afalgeng",
                                "asm",
                                "async",
                                "autoalginit", #allow automatic initialization of algorithms
                                "capieng",
                                "cms",
                                "comp",
                                "ct",
                                #"dgram",
                                "dso",
                                "dynamic-engine",
                                #"ec",
                                #"ec2m",
                                #"engine",
                                "filenames",
                                "gost",
                                # doesnt work here: "hw-padlock", but also doesnt seem to affect the makefile
                                "makedepend",
                                "multiblock",
                                "nextprotoneg",
                                #"ocsp",
                                "pic",
                                "posix-io",
                                #"psk",
                                "rdrand",
                                "shared",
                                #"srp",
                                #"srtp",
                                "sse2",
                                #"static-engine",
                                "tests",
                                "ts",
                                "ui-console"),
        enable           => add(
                                "weak-ssl-ciphers",
                                "md2",
                                "rc5", 
                                "static-engine"),
    },
);
